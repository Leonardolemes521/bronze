<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bronze Ativo</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>

    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background-color: #f0f4f8;
      color: #333;
    }
    #interface-inicial {
      display: block;
    }
    header {
      background-color: #4a6cf7;
      color: #fff;
      padding: 30px 20px;
      border-bottom-left-radius: 20px;
      border-bottom-right-radius: 20px;
      text-align: center;
    }
    header h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    header input {
      padding: 10px;
      width: 80%;
      max-width: 300px;
      border: none;
      border-radius: 8px;
      margin-top: 10px;
    }
    .sections {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 20px 100px 20px;
      justify-items: center;
    }
    .section {
      background-color: #fff;
      width: 140px;
      height: 140px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      text-align: center;
      padding: 20px 10px;
      transition: transform 0.2s ease;
      cursor: pointer;
    }
    .section:hover {
      transform: scale(1.05);
    }
    .section img {
      width: 50px;
      height: 50px;
      margin-bottom: 10px;
    }
    .section p {
      font-size: 14px;
      font-weight: 500;
    }
    footer {
      background-color: #4a6cf7;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
      color: white;
      font-size: 14px;
    }
    footer a {
      color: white;
      text-decoration: none;
      font-size: 14px;
      cursor: pointer;
    }
    #conteudo {
      padding: 0;
      margin: 0;
    }
    .tela-cadastro {
      background: linear-gradient(to right, #ef7d7fd6, #f19159);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .section-cadastro {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      width: 100%;
      max-width: 800px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      margin-bottom: 30px;
      overflow-x: auto;
      margin-top: 5px;




    }
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    form input,
    form button {
      padding: 12px;
    }
    form button {
      background: #f93a0a;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    form button:hover {
      background: #feb47b;
    }
    .search-box input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1em;
    }
    .tabela-transposta {
      display: none;
      overflow-x: auto;
    }
    .tabela-transposta table {
      border-collapse: collapse;
      min-width: 100%;
    }
    .tabela-transposta td,
    .tabela-transposta th {
      border: 1px solid #ddd;
      padding: 8px;
      font-size: 0.9em;
      text-align: center;
      white-space: nowrap;
    }
    .campo-label {
      background-color: #f2532c;
      color: white;
      font-weight: bold;
      text-align: left;
    }

    footer {
      margin-top: 20px;
      text-align: center;
      color: #fff ;
      font-size: 0.9em;
    }
    
    .header-cadastro {
  text-align: center;
  color: #fff;
  margin-top: 20x;
  margin-bottom: 30px;
}
.header-cadastro h1 {
  font-size: 2em;
  font-weight: 600;
}
.header-cadastro p {
  font-size: 1.1em;
  font-weight: 400;
}

.editar, .excluir {
  padding: 2px 7px;
  border: none;
  border-radius: 7px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s ease;
  margin: 2px;
  font-size: 0.8em;
}

/* Bot√£o Editar - cor laranja suave */
.editar {
  background-color: #00f54e;
}
.editar:hover {
  background-color: #44ef00;
}

/* Bot√£o Excluir - cor vermelha */
.excluir {
  background-color: #d32f2f;
}
.excluir:hover {
  background-color: #b71c1c;
}
</style>
</head>
<body>
  <div id="interface-inicial">
    <header>
      <h1>Bronze Ativo</h1>
      <input type="text" placeholder="Pesquisar se√ß√£o..." />
    </header>

    <div class="sections">
      <div class="section" onclick="mostrarCadastro()">
        <img src="https://img.icons8.com/ios-filled/50/4a6cf7/add-user-group-man-man.png" alt="Cadastro">
        <p>Cadastro</p>
      </div>
      
      
      <div class="section" onclick="mostrarDicas()">
        <img src="https://img.icons8.com/ios-filled/50/4a6cf7/tip.png" alt="Dicas" />
        <p>Dicas</p>
      </div>

      
      <div class="section" onclick="abrirWhatsapp()">
        <img src="https://img.icons8.com/ios-filled/50/4a6cf7/faq.png" alt="Orienta√ß√µes">
        <p>Orienta√ß√µes</p>
      </div>
      <div class="section">
        <img src="https://img.icons8.com/ios-filled/50/4a6cf7/picture.png" alt="Galeria">
        <p>Galeria</p>
      </div>
    </div>

    <footer>
      <a onclick="mostrarCadastro()">Cadastro</a>
      <a onclick="mostrarDicas()">Dicas</a>
      <a onclick="abrirWhatsapp()">Orienta√ß√µes</a>
      <a>Galeria</a>
    </footer>
  </div>

  <div id="conteudo" class="tela-cadastro" style="display:none;">
    
    <div class="header-cadastro">
      <h1>Bronze Ativo</h1>
      <p>Beleza e Bronzeamento Para Voc√™ !!</p>
    </div>
    

    <section class="section-cadastro">
      <h2>Cadastrar Cliente</h2>
      <form id="formulario">
        <input type="text" id="nome" placeholder="Nome completo" required />
        <input type="text" id="telefone" placeholder="Telefone (WhatsApp)" required />
        <input type="text" id="cpf" placeholder="CPF" required />
        <input type="number" id="idade" placeholder="Idade" required />
        <input type="date" id="dataUltimaSessao" required />
        <button type="submit">Cadastrar</button>
      </form>
    </section>

  
    <section class="section-cadastro">
      <h2>Clientes Cadastrados</h2>
      <div class="search-box">
        <input type="text" id="pesquisa" placeholder="üîé Pesquisar por nome ou telefone..." />
      </div>
      <div class="tabela-transposta" id="tabela-transposta">
        <table>
          <tbody id="corpo-transposto"></tbody>
        </table>
      </div>
    </section>
  </div>

  <script type="module">
    function mostrarCadastro() {
      document.getElementById('interface-inicial').style.display = 'none';
      document.getElementById('conteudo').style.display = 'flex';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function mostrarDicas() {
    document.getElementById('interface-inicial').style.display = 'none';
    document.getElementById('conteudo').style.display = 'none';
    document.getElementById('dicas').style.display = 'flex';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      getDocs,
      deleteDoc,
      doc,
      getDoc,
      updateDoc,
    } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCVm3ELOO9RMPfZt3lrlLPrMPvg_DhYeOc",
      authDomain: "bronze-ativo.firebaseapp.com",
      projectId: "bronze-ativo",
      storageBucket: "bronze-ativo.appspot.com",
      messagingSenderId: "748845731696",
      appId: "1:748845731696:web:efde67f483cd5cd2ec09b5",
      measurementId: "G-QRM0WGBWNK"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById("formulario");
    const tabelaTransposta = document.getElementById("tabela-transposta");
    const corpoTransposto = document.getElementById("corpo-transposto");
    const pesquisaInput = document.getElementById("pesquisa");

    let modoEdicao = false;
    let idEdicao = null;

    function exibirTransposta(clientes) {
      corpoTransposto.innerHTML = "";
      const campos = ["Nome", "Telefone", "CPF", "Idade", "√öltima Sess√£o"];
      const chaves = ["nome", "telefone", "cpf", "idade", "dataUltimaSessao"];

      chaves.forEach((chave, i) => {
        const linha = document.createElement("tr");
        const campo = document.createElement("td");
        campo.className = "campo-label";
        campo.textContent = campos[i];
        linha.appendChild(campo);

        clientes.slice(0, 3).forEach((cliente) => {
          const celula = document.createElement("td");
          celula.textContent = cliente[chave];
          linha.appendChild(celula);
        });

        corpoTransposto.appendChild(linha);
      });

      const linhaAcoes = document.createElement("tr");
      const celulaAcoes = document.createElement("td");
      celulaAcoes.className = "campo-label";
      celulaAcoes.textContent = "A√ß√µes";
      linhaAcoes.appendChild(celulaAcoes);

      clientes.slice(0, 3).forEach((cliente) => {
        const celula = document.createElement("td");
        celula.innerHTML = `
          <button class="editar" data-id="${cliente.id}">Editar</button>
          <button class="excluir" data-id="${cliente.id}">Excluir</button>
        `;
        linhaAcoes.appendChild(celula);
      });
      corpoTransposto.appendChild(linhaAcoes);

      document.querySelectorAll(".excluir").forEach((btn) => {
        btn.addEventListener("click", async () => {
          const id = btn.getAttribute("data-id");
          if (confirm("Tem certeza que deseja excluir este cliente?")) {
            await deleteDoc(doc(db, "clientes", id));
            corpoTransposto.innerHTML = "";
            tabelaTransposta.style.display = "none";
          }
        });
      });

      document.querySelectorAll(".editar").forEach((btn) => {
        btn.addEventListener("click", async () => {
          const id = btn.getAttribute("data-id");
          const docSnap = await getDoc(doc(db, "clientes", id));
          if (docSnap.exists()) {
            const cliente = docSnap.data();
            document.getElementById("nome").value = cliente.nome;
            document.getElementById("telefone").value = cliente.telefone;
            document.getElementById("cpf").value = cliente.cpf;
            document.getElementById("idade").value = cliente.idade;
            document.getElementById("dataUltimaSessao").value = cliente.dataUltimaSessao;
            modoEdicao = true;
            idEdicao = id;
            window.scrollTo({ top: 0, behavior: "smooth" });
          }
        });
      });

      tabelaTransposta.style.display = clientes.length ? "block" : "none";
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const nome = document.getElementById("nome").value;
      const telefone = document.getElementById("telefone").value;
      const cpf = document.getElementById("cpf").value;
      const idade = document.getElementById("idade").value;
      const dataUltimaSessao = document.getElementById("dataUltimaSessao").value;

      if (!/^\d{11}$/.test(cpf)) {
        alert("CPF inv√°lido. Insira os 11 d√≠gitos.");
        return;
      }
      if (isNaN(idade) || idade <= 0) {
        alert("Idade inv√°lida.");
        return;
      }

      try {
        if (modoEdicao && idEdicao) {
          await updateDoc(doc(db, "clientes", idEdicao), {
            nome, telefone, cpf, idade, dataUltimaSessao
          });
          alert("Cliente atualizado com sucesso!");
        } else {
          await addDoc(collection(db, "clientes"), {
            nome, telefone, cpf, idade, dataUltimaSessao
          });

          const mensagem = `Ol√° ${nome}, seu cadastro no Bronze Ativo foi realizado com sucesso! ‚ú®`;
          await fetch('https://api.z-api.io/instances/3E06AE6E4A74303F943D96E82C2DBF10/token/DF27A168C64E8A23C10B9B88/send-text', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              phone: `55${telefone.replace(/\D/g, '')}`,
              message: mensagem
            })
          });

          alert("Cliente cadastrado e mensagem enviada!");
        }

        form.reset();
        modoEdicao = false;
        idEdicao = null;
      } catch (error) {
        console.error("Erro ao cadastrar cliente:", error);
        alert("Erro ao cadastrar cliente.");
      }
    });

    pesquisaInput.addEventListener("input", async function () {
      const termo = pesquisaInput.value.toLowerCase();
      if (!termo) {
        corpoTransposto.innerHTML = "";
        tabelaTransposta.style.display = "none";
        return;
      }

      const querySnapshot = await getDocs(collection(db, "clientes"));
      const clientes = [];
      querySnapshot.forEach((docSnap) => {
        clientes.push({ id: docSnap.id, ...docSnap.data() });
      });

      const filtrados = clientes
        .filter((cliente) =>
          cliente.nome.toLowerCase().includes(termo) ||
          cliente.telefone.toLowerCase().includes(termo)
        )
        .sort((a, b) =>
          a.nome.toLowerCase().indexOf(termo) - b.nome.toLowerCase().indexOf(termo)
        );

      exibirTransposta(filtrados);
    });
    window.mostrarCadastro = mostrarCadastro;


  </script>


<script>
   function mostrarDicas() {
      alert(`Dicas para bronze artificial:
- Use protetor solar para proteger a pele dos danos UV.
- Evite sess√µes muito longas para prevenir queimaduras.
- Hidrate bem a pele antes e depois da aplica√ß√£o.
- Utilize lo√ß√µes p√≥s-sol para prolongar o bronzeado.
- Consulte um dermatologista para evitar riscos.`);
    }
</script>




  <script>
    function abrirWhatsapp() {
      const numero = "5567996682756";
      const mensagem = "Ol√°, quero orienta√ß√µes";
      const url = "https://wa.me/" + numero + "?text=" + encodeURIComponent(mensagem);
      window.open(url, "_blank");
    }
  </script>
  
</body>
</html>
